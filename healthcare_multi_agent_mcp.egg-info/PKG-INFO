Metadata-Version: 2.4
Name: healthcare-multi-agent-mcp
Version: 0.1.0
Summary: A distributed healthcare assistant using multi-agent architecture (A2A + MCP + Gemini)
Requires-Python: >=3.11
Description-Content-Type: text/markdown
Requires-Dist: asyncclick>=8.1.8
Requires-Dist: click>=8.1.8
Requires-Dist: google-adk>=1.0.0
Requires-Dist: httpx>=0.28.1
Requires-Dist: httpx-sse>=0.4.0
Requires-Dist: langchain-google-genai>=2.1.4
Requires-Dist: langchain-mcp-adapters>=0.0.11
Requires-Dist: langgraph>=0.4.3
Requires-Dist: mcp>=1.8.0
Requires-Dist: pydantic>=2.11.3
Requires-Dist: python-dotenv>=1.1.0
Requires-Dist: starlette>=0.46.2
Requires-Dist: uvicorn>=0.34.2

# =============================================================================

# README.md

# =============================================================================

# ğŸ¤– version\_4\_multi\_agent\_mcp â€” Healthcare Use Case Edition

ğŸ¯ **Purpose**
This repository demonstrates a distributed multi-agent system tailored for **Healthcare Assistance**, combining **Googleâ€™s Agent-to-Agent (A2A)** protocol with **Anthropicâ€™s Model Context Protocol (MCP)**.

It showcases a modular architecture where:

* A **Host OrchestratorAgent** delegates health-related queries,
* **Child agents** (SymptomChecker, Appointment, HealthRecords) handle domain-specific requests,
* **MCP Servers** expose external tools (e.g., lab lookup, insurance eligibility, or prescription refill).

---

## ğŸš€ Features

* **A2A Protocol** â€“ Agents register themselves and call each other via JSON-RPC.
* **MCP Integration** â€“ External tools are automatically discovered and callable via stdio.
* **Orchestrator Agent** â€“ Uses LLM logic to delegate to agents or tools intelligently.
* **Dynamic Discovery** â€“ Agents and tools can be hot-plugged via config files.

---

## ğŸ—ï¸ Project Structure (Healthcare Edition)

```bash
version_4_multi_agent_mcp/
â”œâ”€â”€ .env                          # Contains GOOGLE_API_KEY (gitignored)
â”œâ”€â”€ pyproject.toml                # Poetry/uv metadata
â”œâ”€â”€ README.md                     # This file
â”œâ”€â”€ utilities/
â”‚   â”œâ”€â”€ a2a/
â”‚   â”‚   â”œâ”€â”€ agent_discovery.py     # Reads agent_registry.json
â”‚   â”‚   â”œâ”€â”€ agent_connect.py       # For A2A task delegation
â”‚   â”‚   â””â”€â”€ agent_registry.json    # Lists child A2A agents
â”‚   â””â”€â”€ mcp/
â”‚       â”œâ”€â”€ mcp_discovery.py       # Reads mcp_config.json
â”‚       â”œâ”€â”€ mcp_connect.py         # Loads & invokes MCP tools
â”‚       â””â”€â”€ mcp_config.json        # MCP server launch config
â”œâ”€â”€ agents/
â”‚   â”œâ”€â”€ symptom_checker_agent/
â”‚   â”‚   â”œâ”€â”€ __main__.py            # Launches SymptomCheckerAgent
â”‚   â”‚   â”œâ”€â”€ agent.py               # LLM to analyze symptoms
â”‚   â”‚   â””â”€â”€ task_manager.py        # Handles tasks
â”‚   â”œâ”€â”€ appointment_agent/
â”‚   â”‚   â”œâ”€â”€ __main__.py
â”‚   â”‚   â”œâ”€â”€ agent.py               # Books appointments
â”‚   â”‚   â””â”€â”€ task_manager.py
â”‚   â”œâ”€â”€ health_records_agent/
â”‚   â”‚   â”œâ”€â”€ __main__.py
â”‚   â”‚   â”œâ”€â”€ agent.py               # Retrieves patient data
â”‚   â”‚   â””â”€â”€ task_manager.py
â”‚   â””â”€â”€ host_agent/
â”‚       â”œâ”€â”€ entry.py               # Starts the OrchestratorAgent
â”‚       â”œâ”€â”€ orchestrator.py        # LLM logic + A2A + MCP routing
â”œâ”€â”€ server/
â”‚   â”œâ”€â”€ server.py                  # A2A server implementation
â”‚   â””â”€â”€ task_manager.py            # Base/In-memory task store
â”œâ”€â”€ client/
â”‚   â””â”€â”€ a2a_client.py              # JSON-RPC client
â”œâ”€â”€ app/
â”‚   â””â”€â”€ cmd/
â”‚       â””â”€â”€ cmd.py                 # CLI to test the system
â””â”€â”€ models/
    â”œâ”€â”€ agent.py
    â”œâ”€â”€ request.py
    â”œâ”€â”€ task.py
    â””â”€â”€ json_rpc.py
```

---

## ğŸ› ï¸ Prerequisites

* Python 3.11+
* `uv` package manager (optional but recommended)
* `GOOGLE_API_KEY` (Gemini/Vertex access required)

---

## âš™ï¸ Setup Instructions

```bash
# 1. Clone the repo
$ git clone https://github.com/your-org/healthcare-multi-agent-mcp.git
$ cd version_4_multi_agent_mcp

# 2. Set up Python env
$ uv venv
$ source .venv/bin/activate
$ uv sync

# 3. Add your credentials
$ echo "GOOGLE_API_KEY=your-gemini-key" > .env
```

---

## ğŸ¬ Running the Demo

### âœ… 1. Start the Healthcare Agents

```bash
uv run python3 -m agents.symptom_checker_agent --host localhost --port 11001
uv run python3 -m agents.appointment_agent --host localhost --port 11002
uv run python3 -m agents.health_records_agent --host localhost --port 11003
```

### âœ… 2. Start the Host Agent

```bash
uv run python3 -m agents.host_agent.entry --host localhost --port 11000
```

### âœ… 3. Use the CLI to test

```bash
uv run python3 -m app.cmd.cmd --agent http://localhost:11000
```

---

## âš™ï¸ Configuration

### `agent_registry.json`

```json
[
  "http://localhost:11001",
  "http://localhost:11002",
  "http://localhost:11003"
]
```

### `mcp_config.json`

```json
{
  "mcpServers": {
    "lab_tools": {
      "command": "python",
      "args": ["lab_tool_server.py"]
    },
    "insurance_checker": {
      "command": "python",
      "args": ["insurance_tool_server.py"]
    }
  }
}
```

---

## ğŸ“– Architecture Overview

1. **Client** sends task to `HostAgent`.
2. `HostAgent` uses Gemini to classify the task:

   * If **appointment** â†’ forward to `AppointmentAgent`
   * If **symptom analysis** â†’ forward to `SymptomCheckerAgent`
   * If **records needed** â†’ forward to `HealthRecordsAgent`
   * If **external tool** â†’ forward to MCP-discovered server (e.g., Lab, Insurance)
3. Each agent or tool responds via JSON-RPC.

---

## ğŸ”§ Extending the System

* Add a new agent â†’ register its URL in `agent_registry.json`
* Add a new tool â†’ add to `mcp_config.json`
* Define your tool logic using `mcp.tool()` decorators

---

## ğŸ“ Example Queries

```bash
> check symptoms: fever, cough
> book appointment with cardiologist
> fetch records for patient ID 12245
> check insurance eligibility for BlueShield
```

---

## ğŸ™‹â€â™‚ï¸ Need Help?

* File issues via GitHub
* Check the `logs/` folder for debug traces
* Use `--verbose` with CLI to see raw JSON

---
